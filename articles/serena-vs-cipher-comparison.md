---
title: "Claude Codeで選ぶMCPサーバ：SerenaとCipher、理解か記憶か"
emoji: "🤔"
type: "tech"
topics: ["AI", "開発環境", "CLI", "VSCode", "OSS"]
published: false
---

### 1. はじめに：AIはプロジェクトの「文脈」を理解できるか？

今日のソフトウェア開発において、AIの活用はもはや無視できないトレンドになっています。GitHub Copilotを始めとする多くのツールが、日々のコーディングを助けてくれます。

しかし、AIが真に強力なパートナーとなるためには、単にコードを補完するだけでなく、「プロジェクト全体の文脈」を深く理解していることが不可欠です。

例えば、「AIにバグ修正をお願いしたら、関係ないファイルを変更されてしまった…」あるいは「この機能の修正に必要なファイルが多すぎて、AIにどう伝えたらいいか分からない…」といった経験はありませんか？

この「文脈理解」の欠如こそ、現在のAIコーディング支援が持つ大きな課題です。

### 2. 解決策となる2つのOSS：「Serena」と「Cipher」

この「文脈理解」という課題を解決するために、今、2つの注目すべきOSSツールが登場しています。それが「**Serena**」と「**Cipher**」です。

どちらも「AIにコードベース全体を理解させ、開発支援の質を劇的に向上させる」という同じ目的を持っていますが、その実現方法（アーキテクチャ）は対照的です。

この記事では3回にわたり両者を徹底比較します。**【前編】**となる今回は、2つのツールの思想と、根本的なアーキテクチャの違いを解説します。

### 3. 最大の違いはアーキテクチャ：CLIツール vs ローカルサーバー

この2つのツールを理解する上で最も重要なのが、そのアーキテクチャの違いです。この違いが、後述する全てのメリット・デメリットの根源となります。

- **Serena**: **CLIツール**として設計されています。コマンドを実行するたびに、必要な文脈情報を**オンデマンドで生成**します。
- **Cipher**: **ローカルサーバー**として機能します。常にバックグラウンドで起動し、プロジェクトの文脈情報を**持続的に保持・提供**します。

この動作の違いを、簡単な図でイメージしてみましょう。

**▼ Serena（CLIツール型）の動作イメージ**
`[開発者] -> [CLIコマンド実行] -> [Serenaがコードをスキャン] -> [文脈生成] -> [LLMへ送信]`

**▼ Cipher（ローカルサーバー型）の動作イメージ**
`[開発者] <-> [IDE（VSCodeなど）] <-> [Cipherサーバー（常時文脈を保持）] <-> [LLM]`


### 4. 一目でわかる機能比較表

まずは、両者の特徴を一覧で見てみましょう。この表を見るだけで、どちらが自分の志向に近いか、おおよその見当がつくはずです。

| 比較項目 | Serena | Cipher |
|---|---|---|
| **アーキテクチャ** | CLIツール<br>コマンド実行時に都度、文脈を生成する。 | ローカルサーバー<br>常時起動し、文脈（メモリーレイヤー）を保持・提供する。 |
| **導入の手軽さ** | **◎ 非常に手軽**<br>単一のCLIツールと`ctags`をインストールするだけ。（※ Homebrewなら `brew install universal-ctags` で導入できます） | **△ やや複雑**<br>サーバープロセスを起動・管理する必要がある。 |
| **対応ツール・連携** | 自己完結型<br>主にターミナルでの利用が前提。 | **◎ プラットフォーム型**<br>VS CodeやCursor、各種CLIなど、様々なツールが接続できる。 |
| **リソース消費** | **◎ 実行時のみ**<br>コマンドを実行している間だけリソースを消費する。 | △ 常時<br>バックグラウンドで常に一定のリソースを消費する。 |


### 5. 「Serena」のメリット・デメリット

#### メリット（利点）
* **シンプルで手軽**: 導入が非常に簡単で、すぐに試せます。
* **軽量**: バックグラウンドで常にプロセスが動く必要がなく、PCのリソースを圧迫しません。
* **具体的なイメージが湧きやすい**: 以下のように、必要なコード断片をテキストとしてまとめてくれるイメージです。

Serenaが生成するプロンプトの一部（イメージ）
CONTEXT:
File: src/components/Button.js
export default function Button({ children }) { ... }
File: src/App.js (references Button.js)
import Button from './components/Button';
...

#### デメリット（欠点）
* **実行ごとのオーバーヘッド**: 大規模なプロジェクトの場合、応答までに時間がかかる可能性があります。
* **連携性の低さ**: IDEとのシームレスな連携は想定されていません。


### 6. 「Cipher」のメリット・デメリット

#### メリット（利点）
* **強力な連携（エコシステム）**: VS CodeやCursorといった普段使うエディタから透過的に利用できます。設定も比較的シンプルです。
  ```json
  // .vscode/settings.json での設定例
  "mcp.server.url": "http://localhost:8008"
高速な応答: 一度プロジェクトをインデックスすれば、2回目以降の質問には非常に高速に応答できます。

持続的な記憶: 対話を通じてプロジェクトの理解が深まっていくような、より高度な使い方が可能です。

デメリット（欠点）
セットアップの複雑さ: Serenaに比べて、サーバーの起動など初期設定が複雑になります。

リソース消費: 常にバックグラウンドでプロセスが動くため、PCのメモリやCPUを多少なりとも消費します。

さて、両者の具体的な特徴が明らかになりました。

### 7. 結論：あなたの開発スタイルに合うのはどっち？

どちらのツールが優れているかという問いの答えは、あなたのプロジェクトや開発スタイルによって決まります。

#### Serenaが適しているケース
- **CLI中心の開発者**: 普段の作業をターミナルで完結させることが多い。
- **手軽さを重視**: まずは手軽にAIのコード支援能力を向上させたい個人開発者や小規模プロジェクト。
- **リソースを節約したい**: バックグラウンドで余計なプロセスを動かしたくない。

#### Cipherが適しているケース
- **IDE中心の開発者**: VS CodeやCursorから離れずに、シームレスなAI支援を受けたい。
- **パフォーマンスを重視**: 初期設定の手間をかけてでも、高速な応答と持続的な記憶の恩恵を受けたい。
- **大規模・チーム開発**: チームで開発フローの中心にAI支援を据えたい。

### 8. 実践的な導入ステップの提案

もし、どちらを試すか迷ったら、以下のステップで進めるのが最も効果的でしょう。

1.  まず、導入が簡単な**Serena**を個人で試してみて、AIにプロジェクトの文脈を与えることの効果と限界を体感する。
2.  その上で、チーム全体での導入や、より深いIDE連携による高速な応答が必要だと判断した場合に、**Cipher**の導入を本格的に検討する。

この段階的なアプローチにより、無駄な学習コストをかけることなく、自分たちのチームに本当に必要なツールを見極めることができます。

### 9. まとめ

SerenaとCipherは、同じ目的を持ちながらも、全く異なる哲学を持つツールです。

- **Serena**: **「必要な時に、必要なだけ」**を体現する、軽量でシンプルなCLIツール。
- **Cipher**: **「常に寄り添う、賢いアシスタント」**を構築するための、強力な常駐型サーバー。

どちらが良い・悪いということではなく、あなたのワークフローに寄り添ってくれるかが最も重要です。

---

この記事が、あなたのAI開発環境を一段階レベルアップさせるための一助となれば幸いです。

**もし記事が役に立ったと感じたら、ぜひX（旧Twitter）で感想をシェアしていただけると嬉しいです！**

**▼ まずは公式サイトでツールをチェック**
* **[Serena 公式GitHubリポジトリ](ここにSerenaのURL)**
* **[Cipher 公式GitHubリポジトリ](ここにCipherのURL)**
